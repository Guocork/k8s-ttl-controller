name: Build

# Run this workflow every time a new commit pushed to your repository
on: push

jobs:
  build:
    name: Build artifact
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: docker build -f build/Dockerfile . -t fpetkovski/ttl-controller:$GITHUB_REF
      - run: docker login --username ${{ secrets.DOCKERHUB_USERNAME }} --password ${{ secrets.DOCKERHUB_PASSWORD }}
      - run: docker push fpetkovski/ttl-controller:$GITHUB_REF